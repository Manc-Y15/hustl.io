{% extends 'base/base_layout.html' %}
{% load static %}
{% load humanize %}
{% block content %}
<link rel="stylesheet" href="{% static 'css/portfolio.css' %}">


<div class="container" id="dashboard_container" style="margin-bottom: 50px;max-width: 1300px">
    <div class="row" style="margin-top:15px;">
        <div class="col" style="margin-bottom: 15px; padding: 5px !important;text-align: center;">
            <div class="display-1 section-heading ">
                <h1>Welcome, Alex</h1>
            </div>
        </div>
    </div>
    <div class="row" style="margin-top:15px">
        <div class="col-12 portfolio-summary d-flex flex-column justify-content-center ">
            <h1 class="activity-item-text ">
                Your portfolio is currently worth <span style="color: var(--emerald); ">${{ portfolio_value }}</span> ranking
                <span style="color: var(--amethyst); ">15th</span> globally. <br>
            </h1>
            <small style="font-family: 'Comfortaa'; font-size: 1rem; color:white">{{ message }}</small>
        </div>
    </div>
    <div class="row" style="margin-top: 15px; gap: 15px; ">
        <div class="col portfolio-info-box ">
            <h3>Top Trader</h3>
            <h1 class="showcase-number "><span style="color: var(--orange); ">Fawaz</span>
            </h1>
        </div>
        <div class="col portfolio-info-box ">
            <h3>Market Direction</h3>
            <h1 class="showcase-number "><span style="color: var(--orange); ">$10,000</span>
            </h1>
        </div>
        <div class="col portfolio-info-box ">
            <h3>Total Profit</h3>
            <h1 class="showcase-number "><span style="color: var(--orange); ">$10,000</span>
            </h1>
        </div>
    </div>
    <div class="row" style="margin-top:40px;">
        <div class="col" style="margin-bottom: 15px; padding: 5px !important;text-align: center;">
            <div class="display-1 section-heading ">
                <h1 style="text-align: center;font-size:3rem;">
                    <span style="width: fit-content;background: linear-gradient(90deg, var(--sun-flower) 30%,var(--carrot) 70%, var(--pomegranate) 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">Hot</span> and 
                    <span style="width: fit-content;background: linear-gradient(90deg, var(--silver) 23%, var(--river) 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">Cold</span>
                </h1>
            </div>
        </div>
    </div>
    <div class="row" style="margin-top:15px; gap:15px;">
        {% for stock in stocks %}
            <div class="col portfolio-info-box">
                    <a class="col-12 col-md-8" style="text-decoration: none;" href="/trading/{{ stock.ticket }}">
                        <h2 class="activity-item-text" style="text-align: left;">
                            <span style="width: fit-content;font-weight: 900; background: linear-gradient(90deg, {{ stock.col1 }} 23%, {{ stock.col2 }} 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">${{ stock.ticket }}</span>
                            <span style="color: var(--concrete); font-size:1rem">{{ stock.name }}</span>
                        </h2>
                    </a>
                    
                    <span class="price" style="max-width: fit-content; margin-right: 5px;">
                        {% if stock.day_pos %}<span style="color: var(--nephritis);">{{ stock.day_change}}% (24hr)<i style="margin-left:5px; position: relative; bottom:0px;"
                            class="fas fa-caret-up"></i>{% else %}<span style="color: var(--alizarin);">{{ stock.day_change }}% (24hr)<i style="color: var(--alizarin); margin-left:5px; position: relative; bottom:0px;"
                        class="fas fa-caret-down"></i>{% endif %}</span></span>
                    <span class="price" style="max-width: fit-content; margin-right: 5px;">
                        {% if stock.week_pos %}<span style="color: var(--nephritis);">{{ stock.week_change}}% (7d)<i style="margin-left:5px; position: relative; bottom:0px;"
                            class="fas fa-caret-up"></i>{% else %}<span style="color: var(--alizarin);">{{ stock.week_change}}% (7d)<i style="color: var(--alizarin); margin-left:5px; position: relative; bottom:0px;"
                        class="fas fa-caret-down"></i>{% endif %}</span></span>
                    <span class="price" style="max-width: fit-content; margin-right: 5px;">
                        {% if stock.price_pos %}<span style="color: var(--nephritis);">${{ stock.current_price|intcomma }} ($)<i style="margin-left:5px; position: relative; bottom:0px;"
                            class="fas fa-caret-up"></i>{% else %}<span style="color: var(--alizarin);">${{ stock.current_price|intcomma }} ($)<i style="color: var(--alizarin); margin-left:5px; position: relative; bottom:0px;"
                        class="fas fa-caret-down"></i>{% endif %}</span></span>
            </div>
        {% endfor %}
    </div>
    
    <div class="row">
    {% if user.is_authenticated %}
    <div class = "col">
    <!-- Activity Feed -->
        <div class="row portfolio-info-box" style="margin-top: 30px;padding: 5px ;;max-width: 500px">
            <div class="row">
                <div class="col" style="margin: 5px auto; padding: 0px !important;">
                    <div>
                        <h1 style="text-align: center;"> Your recent trades </h1>
                    </div>
                </div>
            </div>
            <div class="row justify-content-center" style="margin-top: 15px;margin-left: 15px;margin-right: 15px;">
                <div class="list-group list-group-flush" style="margin-top: 20px;max-width: 613px"></div>
                {% for transac in user_transactions %}
                    <li class="list-group-item activity-item">
                        <h5 class="activity-item-text">
                            <font style="color: #f39c12">{{ transac.0 }}</font> {{ transac.1 }}
                            <font style="color: #2ecc71">${{ transac.2 }}</font> of
                            <font style="color: #3498db">{{ transac.3 }}</font> at
                            <font style="color: #3498db">${{ transac.4 }}</font>
                            <font style="float: right; color: #95a5a6">{{ transac.5 }}</font>
                        </h5>
                    </li>
                {% endfor %}
                </div>
            </div>
        </div>
        <div class="row portfolio-info-box" style="margin-top: 30px;padding: 5px ;;max-width: 500px">
            <div class="row">
                <div class="col" style="margin: 5px auto; padding: 5px !important;">
                    <div>
                        <h1 style="text-align: center;"> Your friends' recent trades</h1>
                    </div>
                </div>
            </div>
            <div class="row justify-content-center" style="margin-top: 15px;margin-left: 15px;margin-right: 15px;">
                <div class="list-group list-group-flush" style="margin-top: 20px;max-width: 500px"></div>
                {% for transac in friend_transactions %}
                    <li class="list-group-item activity-item">
                        <h5 class="activity-item-text">
                            <font style="color: #f39c12">{{ transac.0 }}</font> {{ transac.1 }}
                            <font style="color: #2ecc71">${{ transac.2 }}</font> of
                            <font style="color: #3498db">{{ transac.3 }}</font> at
                            <font style="color: #3498db">${{ transac.4 }}</font>
                            <font style="float: right; color: #95a5a6">{{ transac.5 }}</font>
                        </h5>
                    </li>
                {% endfor %}
                </div>
            </div>
    </div>
    {% endif %}
</div>
{% endblock %}